 
name: Java CI and Deploy to Render 
 
on: 
  push: 
    branches: [ master ]       # Trigger workflow on every push to master 
  pull_request: 
    branches: [ master ]       # Trigger workflow for pull requests to master 
 
jobs: 
  build-and-deploy: 
    runs-on: ubuntu-latest      # Use an Ubuntu virtual machine 
 
    steps: 
    # Step 1: Checkout the repository 
    - uses: actions/checkout@v3 
 
    # Step 2: Set up Java 17 for Maven 
    - name: Set up JDK 17 
      uses: actions/setup-java@v3 
      with: 
        java-version: '17' 
        distribution: 'temurin' 
 
    # Step 3: Build the project with Maven, skipping tests 
    - name: Build with Maven 
      run: mvn clean package -DskipTests 
 
    # Step 4: Build Docker image  from Dockerfile 
    - name: Build Docker image 
      run: docker build -t my-app . 
 
    # ******* Continuous Deployment ******* 
    # Step 5: Install Render CLI and deploy in the same step 
  
    - name: Deploy to production 
      uses: johnbeynon/render-deploy-action@v0.0.8 
      with: 
        service-id: ${{ secrets.SERVICE_ID }} 
        api-key: ${{ secrets. RENDER_API_KEY }}